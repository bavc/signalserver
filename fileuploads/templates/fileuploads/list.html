{% extends 'base.html' %}
{% block content %}


<span>
    <div class = "container-fluid">
    <h1>File List, Search and Upload</h1>
    <div class="row">
        <div class="col-md-6">
             <h3>List of of all loaded files </h3>
                {% if videos %}
                <ul>
                {% for video in videos %}
                    <li>{{ video.filename }}
                    Uploaded time{{video.upload_time}}
                    <a href="delete-video/{{video.filename}}">Delete</a></li>
                {% endfor %}
                </ul>

                {% else %}
                    <p>No file.</p>
                {% endif %}
        </div>
        <div class="col-md-6">



            <h3> File upload </h3>
            <form action="{% url 'fileuploads:upload' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input name='user_name' id='user_name' type="hidden" value='{{ user.username}}'>
            <p>{{ form.non_field_errors }}</p>
            <p>{{ form.videofile.label_tag }} {{ form.videofile.help_text }}</p>
            <p>
                {{ form.videofile.errors }}
                {{ form.videofile }}
            </p>
            <p><input type="submit" value="Upload" /></p>
            </form>
            <h3>File Search</h3>
            <form action="{% url 'fileuploads:list' %}" name = "search" method="post" class="form">
            {% csrf_token %}
                <p>Start Time: <input name='start_field' type="text" id="datetimepicker"></p>
                <p>End Time: <input name='end_field' type="text" id="datetimepicker2"></p>

                <p>Exact file name or keyword in the filename (case sensitive): </p>
                <p><input name='keyword' type="text" id="keyword"></p>
                <button type="search" class="btn btn-primary">
                    Search
                </button>
                </form>
                {% if files %}
                    <h3> Search Results </h3>
                        <h4> Search keywords
                        {% if keyword %}
                           {{ keyword }}
                        {% endif %}
                        </h4>
                        {% if start %}
                            <h4> Start time : {{ start}}
                        {% endif %}
                        {% if end %}
                            End time : {{ end }}</h4>
                        {% endif %}

                        <ul>
                        {% for video in files %}
                            <li>
                            {{ video.filename }}
                            <ul>Uploaded time : {{video.upload_time}}
                            <a href="delete-video/{{video.filename}}">Delete</a></ul>
                            </li>
                        {% endfor %}
                        </ul>
                {% endif %}
        </div>

    </div>
    </div>
</span>

{% endblock %}

