{% include 'base.html' %}
<script type="text/javascript" src="/frontend/bower_components/d3/d3.min.js"></script>



{% block body_block %}
        <body>
        <h2> Processed Result
        <h2> Group Name : {{ group_name }}, Processed time: {{ processed_time }}
        <h2> Config Name : {{ config_name }} </h2>

        {% if operations %}

                {% for operation in operations %}
                    <div class="container">
                        <h3> Signal Name : {{ operation.signal_name }} Second Signal Name : {{ operation.second_signal_name }}
                             Operation: {{ operation.op_name }}
                        </h3>

                        {% if operation.cut_off_number %}
                        <h3> The value exceeds {{ operation.cut_off_number }}. </h3>
                        <h4> The graph value is percentage, the number that exceeds the cut of number devided by total number of frames </h4>
                        {% endif %}

                        <div id="chart{{ forloop.counter }}"></div>
                    </div>
                {% endfor %}
        {% endif %}
        <li><a href="/">Go back to file list</a></li>
        <li><a href="/operations/">Go to config list</a></li>
        <li><a href="/search/">Go to file search and group</a></li>
        <li><a href="/save_group/">Go to group list</a></li>
        <li><a href="../group_process/">Go to check the status all group process</a></li>
        <li><a href="/status/">Go to status of all the file process list</li>

<script type="text/javascript" src="/frontend/static/js/linechart.js"></script>
<script>
signal_names = [
{% for name in signal_names %}
    "{{name}}"{% if not forloop.last %}, {% endif %}
{% endfor %}
];
op_names = [
{% for op_name in op_names %}
    "{{op_name}}"{% if not forloop.last %}, {% endif %}
{% endfor %}
];

function graph_for_signal(name, op_name, idx) {
    d3.json("{% url 'fileuploads:get_graph_data' %}?group_name={{group_name}}&processed_time={{processed_time}}&signal_name=" + name + "&op_name=" + op_name,
        function(error, data) {
            createLineGraph(data, '#chart' + idx, 'lineChart' + idx);
        }
    );
}

for (i = 0; i < signal_names.length; i++) {
    graph_for_signal(signal_names[i], op_names[i], i + 1);
}

</script>
{% endblock %}


